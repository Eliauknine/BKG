  updateCaches(-removedOps, -removedLeafOps);  // FIXME: reuse ReadLineCapable?  final long offset = operationEmitter.getOffset();  final RandomAccessFile raf = new RandomAccessFile(getTempFilePath(), "rw");   final long skip = raf.length() + 1 - offset;  raf.seek(skip);  final byte[] bytes = asBytes(XmlTags.NEWLINE + XmlTags.CHANGE_PACKAGE_END);  raf.write(bytes);  raf.setLength(skip + bytes.length);  raf.close();  return ops; 		} catch (final IOException ex) {  // ESException not available  throw new IllegalStateException(ex); 		} finally {  if (maybeReversedReader.isPresent()) {  try {   maybeReversedReader.get().close();  } catch (final IOException ex) {  ModelUtil.logException(ex); 				} 			} 		}
