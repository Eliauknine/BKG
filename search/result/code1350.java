  .use(bodyParser.json()) .get("/file*", getplans); function planJson(type, manifest , planner , wizard){  return {  "ApplicationType": type,  "Manifest": manifest,  "ManifestPath": "manifest.yml",  "Planner": "org.eclipse.orion.server.cf." + planner,  "Required": [],  "Type": "Plan",  "Wizard": "org.eclipse.orion.client.cf.wizard." + wizard  }; } function getplans(req, res){  var filePath = manifests.retrieveProjectFilePath(req);  manifests.retrieveManifestFile(req)  .then(function(manifest){  var children = [];  function generatePlansforManifest(manifest,children){  function generateGenericPlan(manifest){  return planJson("generic",manifest,"ds.GenericDeploymentPlanner","generic");  }  function generateNodePlan(manifest){  if(fs.existsSync(path.join(filePath,"package.json"))){  return planJson("node.js",manifest,"nodejs.NodeJSDeploymentPlanner","nodejs");  }  }  var genericPlan = generateGenericPlan(manifest);  var nodePlan = generateNodePlan(manifest);  children.push(genericPlan);  if(nodePlan){  children.push(nodePlan);  }  }  generatePlansforManifest(manifest,children);  var result = {"Children": children};  res.status(200).json(result);  }).catch(function(err){ } } }
