 final ComboTagFilter marketCategoryTagFilter = new ComboTagFilter() { @Override  public void catalogUpdated(boolean wasCancelled) {  Set<Tag> newChoices = new HashSet<Tag>();  List<Tag> choices = new ArrayList<Tag>();  for (CatalogCategory category : catalog.getCategories()) {  if (category instanceof MarketplaceCategory) {  MarketplaceCategory marketplaceCategory = (MarketplaceCategory) category;  for (Market market : marketplaceCategory.getMarkets()) {  for (Category marketCategory : market.getCategory()) {  Tag categoryTag = new Tag(Category.class, marketCategory.getId(),  marketCategory.getName());  categoryTag.setData(marketCategory);  if (newChoices.add(categoryTag)) {  choices.add(categoryTag); 								} 							} 						} 					} 				}  setChoices(choices); 			} 		};  marketCategoryTagFilter.setSelectAllOnNoSelection(true);  marketCategoryTagFilter.setNoSelectionLabel(Messages.MarketplaceWizardCommand_allCategories);  marketCategoryTagFilter.setTagClassification(Category.class);  marketCategoryTagFilter.setChoices(new ArrayList<Tag>());  configuration.getFilters().add(marketFilter);  configuration.getFilters().add(marketCategoryTagFilter);  configuration.setInitialState(wizardState); 
