 public void writeRevision(IDBStoreAccessor accessor, CDORevision revision, OMMon{  protected void checkDuplicateResources(IDBStoreAccessor accessor, CDORevision revision) throws IllegalStateException  {  IRepository repository = getMappingStrategy().getStore().getRepository();  if (repository.isSupportingAudits())     {  IPackageManager packageManager = repository.getPackageManager();  CDOResourceNodeClass resourceNodeClass = packageManager.getCDOResourcePackage().getCDOResourceNodeClass();  CDOFeature resourceNameFeature = resourceNodeClass.getCDONameFeature();   CDOID folderID = (CDOID)revision.data().getContainerID();   String name = (String)revision.data().get(resourceNameFeature, 0);   if (accessor.readResourceID(folderID, name, revision.getCreated()) != null)    {   throw new IllegalStateException("Duplicate resource or folder: " + name + " in folder " + folderID);  }     }   } } 
